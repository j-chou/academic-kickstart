blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
require(tidyverse)
n <- 1000
beta <- 2.5
w <- rnorm(n, -4, 1)
z <- rnorm(n, 2, 3)
x <- -2 * w + 3 * z + rnorm(n, 0, 1)
y <- beta * x + 5 * w + rnorm(n, 0, 1)
df <- data.frame('w' = w, 'z' = z, 'x' = x, 'y' = y)
lr_mod <- lm(y ~ x, data = df)
lr_mod
beta <- 4
w <- rnorm(n, -4, 1)
z <- rnorm(n, 2, 3)
x <- -2 * w + 3 * z + rnorm(n, 0, 1)
y <- beta * x + 5 * w + rnorm(n, 0, 1)
df <- data.frame('w' = w, 'z' = z, 'x' = x, 'y' = y)
lr_mod <- lm(y ~ x, data = df)
lr_mod
require(tidyverse)
n <- 1000
beta <- 2.5
w <- rnorm(n, -4, 1)
z <- rnorm(n, 2, 3)
x <- -2 * w + 3 * z + rnorm(n, 0, 1)
y <- beta * x + 5 * w + rnorm(n, 0, 1)
df <- data.frame('w' = w, 'z' = z, 'x' = x, 'y' = y)
lr_mod <- lm(y ~ x, data = df)
lr_mod
lr_mod$coefficients[, 'x']
lr_mod$coefficients['x']
lr_est <- lr_mod$coefficients['x']
yz_mod <- lm(y ~ z, data = df)
xz_mod <- lm(x ~ z, data = df)
require(tidyverse)
n <- 1000
beta <- 2.5
w <- rnorm(n, -4, 1)
z <- rnorm(n, 2, 3)
x <- -2 * w + 3 * z + rnorm(n, 0, 1)
y <- beta * x + 5 * w + rnorm(n, 0, 1)
df <- data.frame('w' = w, 'z' = z, 'x' = x, 'y' = y)
lr_mod <- lm(y ~ x, data = df)
lr_est <- lr_mod$coefficients['x']
yz_mod <- lm(y ~ z, data = df)
xz_mod <- lm(x ~ z, data = df)
iv_est <- yz_mod$coefficients[2]/xz_mod$coefficients[2]
iv_est
lr_est
require(tidyverse)
n <- 1000
beta <- 2.5
w <- rnorm(n, -4, 1)
z <- rnorm(n, 2, 3)
x <- -2 * w + 8 * z + rnorm(n, 0, 1)
y <- beta * x + 5 * w + rnorm(n, 0, 1)
df <- data.frame('w' = w, 'z' = z, 'x' = x, 'y' = y)
lr_mod <- lm(y ~ x, data = df)
lr_est <- lr_mod$coefficients['x']
yz_mod <- lm(y ~ z, data = df)
xz_mod <- lm(x ~ z, data = df)
iv_est <- yz_mod$coefficients[2]/xz_mod$coefficients[2]
iv_est
lr_est
require(tidyverse)
n <- 1000
beta <- 2.5
w <- rnorm(n, -4, 1)
z <- rnorm(n, 2, 3)
x <- -8 * w + 4 * z + rnorm(n, 0, 1)
y <- beta * x + 5 * w + rnorm(n, 0, 1)
df <- data.frame('w' = w, 'z' = z, 'x' = x, 'y' = y)
lr_mod <- lm(y ~ x, data = df)
lr_est <- lr_mod$coefficients['x']
yz_mod <- lm(y ~ z, data = df)
xz_mod <- lm(x ~ z, data = df)
iv_est <- yz_mod$coefficients[2]/xz_mod$coefficients[2]
iv_est
lr_est
require(tidyverse)
n <- 1000
beta <- 2.5
w <- rnorm(n, -4, 1)
z <- rnorm(n, 2, 3)
x <- -20 * w + 4 * z + rnorm(n, 0, 1)
y <- beta * x + 5 * w + rnorm(n, 0, 1)
df <- data.frame('w' = w, 'z' = z, 'x' = x, 'y' = y)
lr_mod <- lm(y ~ x, data = df)
lr_est <- lr_mod$coefficients['x']
yz_mod <- lm(y ~ z, data = df)
xz_mod <- lm(x ~ z, data = df)
iv_est <- yz_mod$coefficients[2]/xz_mod$coefficients[2]
iv_est
lr_est
require(tidyverse)
n <- 1000
beta <- 2.5
w <- rnorm(n, -4, 1)
z <- rnorm(n, 2, 3)
x <- -8 * w + 4 * z + rnorm(n, 0, 1)
y <- beta * x + 5 * w + rnorm(n, 0, 1)
df <- data.frame('w' = w, 'z' = z, 'x' = x, 'y' = y)
lr_mod <- lm(y ~ x, data = df)
lr_est <- lr_mod$coefficients['x']
yz_mod <- lm(y ~ z, data = df)
xz_mod <- lm(x ~ z, data = df)
iv_est <- yz_mod$coefficients[2]/xz_mod$coefficients[2]
iv_est
lr_est
require(tidyverse)
n <- 1000
beta <- 2.5
w <- rnorm(n, -4, 1)
z <- rnorm(n, 2, 3)
x <- -8 * w + 4 * z + rnorm(n, 0, 1)
y <- beta * x + 5 * w + rnorm(n, 0, 1)
df <- data.frame('w' = w, 'z' = z, 'x' = x, 'y' = y)
lr_mod <- lm(y ~ x, data = df)
lr_est <- lr_mod$coefficients['x']
yz_mod <- lm(y ~ z, data = df)
xz_mod <- lm(x ~ z, data = df)
iv_est <- yz_mod$coefficients[2]/xz_mod$coefficients[2]
iv_est
lr_est
# What happens if I treat the IV as a confounder?
# What happens if I treat the IV as a confounder?
mod_confound <- lm(y ~ x + w + z, data = df)
mod_confound_est <- mod_confound$coefficients['x']
mod_confound_est
mod <- lm(y ~ x + w, data = df)
mod$coefficients['x']
for (i in 1:n_trials){
w <- rnorm(n, -4, 1)
z <- rnorm(n, 2, 3)
x <- -8 * w + 4 * z + rnorm(n, 0, 1)
y <- beta * x + 5 * w + rnorm(n, 0, 1)
df <- data.frame('w' = w, 'z' = z, 'x' = x, 'y' = y)
mod_confound <- lm(y ~ x + w + z, data = df)
confound_estimates[i] <- mod_confound$coefficients['x']
}
n_trials <- 1000
confound_estimates <- rep(0, n_trials)
n <- 1000
beta <- 2.5
for (i in 1:n_trials){
w <- rnorm(n, -4, 1)
z <- rnorm(n, 2, 3)
x <- -8 * w + 4 * z + rnorm(n, 0, 1)
y <- beta * x + 5 * w + rnorm(n, 0, 1)
df <- data.frame('w' = w, 'z' = z, 'x' = x, 'y' = y)
mod_confound <- lm(y ~ x + w + z, data = df)
confound_estimates[i] <- mod_confound$coefficients['x']
}
hist(confound_estimates)
summary(confound_estimates)
mod_confound <- lm(y ~ x + w, data = df)
mod_confound_est <- mod_confound$coefficients['x']
mod_confound_est
mod <- lm(y ~ x + w, data = df)
mod$coefficients['x']
n_trials <- 1000
confound_estimates <- rep(0, n_trials)
n <- 1000
beta <- 2.5
for (i in 1:n_trials){
w <- rnorm(n, -4, 1)
z <- rnorm(n, 2, 3)
x <- -8 * w + 20 * z + rnorm(n, 0, 1)
y <- beta * x + 5 * w + rnorm(n, 0, 1)
df <- data.frame('w' = w, 'z' = z, 'x' = x, 'y' = y)
mod_confound <- lm(y ~ x + w + z, data = df)
confound_estimates[i] <- mod_confound$coefficients['x']
}
hist(confound_estimates)
summary(confound_estimates)
mod_confound <- lm(y ~ x + z, data = df)
n_trials <- 1000
confound_estimates <- rep(0, n_trials)
n <- 1000
beta <- 2.5
for (i in 1:n_trials){
w <- rnorm(n, -4, 1)
z <- rnorm(n, 2, 3)
x <- -8 * w + 20 * z + rnorm(n, 0, 1)
y <- beta * x + 5 * w + rnorm(n, 0, 1)
df <- data.frame('w' = w, 'z' = z, 'x' = x, 'y' = y)
mod_confound <- lm(y ~ x + z, data = df)
confound_estimates[i] <- mod_confound$coefficients['x']
}
hist(confound_estimates)
summary(confound_estimates)
